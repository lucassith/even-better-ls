4761,4765c4761
<   /* Check the file's suffix only if still classified as C_FILE.  */
<   ext = NULL;
<   if (type == C_FILE)
<     {
<       /* Test if NAME has a recognized suffix.  */
---
>   /* Test if NAME has a recognized suffix.  */
4767,4775c4763,4770
<       len = strlen (name);
<       name += len;		/* Pointer to final \0.  */
<       for (ext = color_ext_list; ext != NULL; ext = ext->next)
<         {
<           if (ext->ext.len <= len
<               && c_strncasecmp (name - ext->ext.len, ext->ext.string,
<                                 ext->ext.len) == 0)
<             break;
<         }
---
>   len = strlen (name);
>   name += len;		/* Pointer to final \0.  */
>   for (ext = color_ext_list; ext != NULL; ext = ext->next)
>     {
>       if (ext->ext.len <= len
>           && c_strncasecmp (name - ext->ext.len, ext->ext.string,
>                             ext->ext.len) == 0)
>         break;
4832a4828,4830
> 
>   if (print_with_color)
> 	  len += 2;
